package files.dao;

import java.io.File;

import org.mybatis.spring.SqlSessionTemplate;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

import files.bean.FilesDTO;
@Repository
public class FilesDAO {
	@Autowired
	SqlSessionTemplate sqlSession;
	
	public int getCommunityFirstSeq() {
		return sqlSession.selectOne("mybatis.filesMapper.getMemberFirstSeq");
	}
	
	public int filesWrite(FilesDTO filesDTO) {
		return sqlSession.insert("mybatis.filesMapper.filesWrite", filesDTO);
	}
	
	public String checkFiles(int community_seq) {
		return sqlSession.selectOne("mybatis.filesMapper.checkFiles", community_seq);
	}
	
	public int filesDelete(int community_seq, String filePath) {
		int su = sqlSession.delete("mybatis.filesMapper.filesDelete", community_seq);
		if(su > 0) {
       	 File file = new File(filePath);
            file.delete();
        }
		return su;
	}
}
