package region.controller;

import javax.servlet.http.HttpServletRequest;

import org.json.JSONObject;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import region.bean.RegionDTO;

@Controller
public class RegionController {
	@Autowired
	RegionService regionService;
	
	@RequestMapping(value = "/region/region_insert.do")
	public ModelAndView regionWrite(HttpServletRequest request) throws Exception {
		request.setCharacterEncoding("UTF-8");
		
		String si = request.getParameter("si");
		String gu = request.getParameter("gu");
		RegionDTO regionDTO = new RegionDTO();
		regionDTO.setSi(si);
		regionDTO.setGu(gu);
		
		int regionResult = regionService.regionWrite(regionDTO);
		
		String RT = "FAIL";
		if(regionResult > 0) RT = "OK";
		
	    JSONObject json = new JSONObject();
	    json.put("RT", RT);
	    
	    // 화면 네비게이션
	    ModelAndView modelAndView = new ModelAndView();
	    modelAndView.addObject("json", json);
	    modelAndView.setViewName("region.jsp");
	       
	    return modelAndView;
	}
	
	@RequestMapping(value = "/region/region_delete.do")
	public ModelAndView regionDelete(HttpServletRequest request) throws Exception {
		request.setCharacterEncoding("UTF-8");
		
		int region_id = 0;
		String region_id_string = request.getParameter("region_id");
		if(region_id_string != null) {
			region_id = Integer.parseInt(region_id_string);
		}
		String si = request.getParameter("si");
		String gu = request.getParameter("gu");
		
		RegionDTO regionDTO = new RegionDTO();
		regionDTO.setRegion_id(region_id);
		regionDTO.setSi(si);
		regionDTO.setGu(gu);
		
		int regionResult = regionService.regionDelete(regionDTO);
		
		
	}
	@RequestMapping(value = "/region/region_list.do")
	public ModelAndView regionList(HttpServletRequest request) throws Exception {
		request.setCharacterEncoding("UTF-8");
	}
}
